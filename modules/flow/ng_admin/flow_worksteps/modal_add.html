<form #workstep_add = "ngForm" (ngSubmit) = "add_submit(workstep_add)">
<div class="modal-header">
  <span class="modal-title">
    <strong><i class="fa fa-plus-circle"></i>&nbsp;&nbsp;{{ 'FLOW.WORKSTEPADD' | transloco }}</strong>
  </span>
</div>
<div class="modal-body">

    <div class="container">
      <div class="row">
        <div class="col-sm-6">
          <div class="form-group">
            <label>{{ 'FLOW.WSNAME' | transloco }}</label>
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)] = "modal_step_content.name" name="step_name" required>
              <div class="invalid-feedback">please enter a name for this step</div>
            </div>
          </div>
        </div>
        <div class="col-sm-6">
          <div class="form-group">
            <label>{{ 'FLOW.WSFUNCTION' | transloco }}</label>
            <select class="form-control" [(ngModel)]="modal_step_content.fctid" name="step_fctid">
              <option *ngFor="let fct of step_functions" [value]="fct.id">{{fct.name}}</option>
            </select>
          </div>
        </div>
      </div>

      <div [ngSwitch]="modal_step_content.fctid">

        <div class="form-group" *ngSwitchCase="3">

        </div>

        <div class="form-group" *ngSwitchCase="4">

        </div>

        <div class="form-group" *ngSwitchCase="5">
          <div class="alert alert-info" role="alert">
            this step waits until a set was sent to each variable within the wait list node. a code can be specified for security reasons.
          </div>
        </div>

        <div class="form-group" *ngSwitchCase="10">

        </div>

        <div class="form-group" *ngSwitchCase="11">

        </div>

        <div class="form-group" *ngSwitchCase="12">

        </div>

        <div class="form-group" *ngSwitchCase="13">
          <div class="alert alert-info" role="alert">
            checks if a variable exists. if there is an additional params node given, it checks inside this node
          </div>
        </div>

        <div class="form-group" *ngSwitchCase="21">

        </div>

        <div class="form-group" *ngSwitchCase="50">

        </div>

        <div class="form-group" *ngSwitchCase="51">

        </div>

        <div class="form-group" *ngSwitchCase="52">
          <div class="alert alert-info" role="alert">
            moves a variable to a new destination and name
          </div>
        </div>

        <div class="form-group" *ngSwitchDefault>
          <div class="alert alert-danger" role="alert">
            please select a function
          </div>
        </div>

      </div>

      <hr>

      <div [ngSwitch]="modal_step_content.fctid">
        <!-- the same view can be shown in more than one case -->
        <div class="form-group" *ngSwitchCase="3">

          <div class="form-group">
            <label>{{ 'FLOW.WSMODULE' | transloco }}</label>
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)] = "modal_step_content.pdata.module" name="module">
            </div>
          </div>
          <div class="form-group">
            <label>{{ 'FLOW.WSMETHOD' | transloco }}</label>
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)] = "modal_step_content.pdata.method" name="method">
            </div>
          </div>

          <qbng-params [(model)] = "modal_step_content.pdata.params" [name] = "'params'"></qbng-params>

        </div>
        <div class="form-group" *ngSwitchCase="4">

          <div class="form-group">
            <label>module</label>
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)] = "modal_step_content.pdata.module" name="module">
            </div>
          </div>
          <div class="form-group">
            <label>method</label>
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)] = "modal_step_content.pdata.method" name="method">
            </div>
          </div>

          <qbng-params [(model)] = "modal_step_content.pdata.params" [name] = "'params'"></qbng-params>

        </div>

        <div class="form-group" *ngSwitchCase="5">

          <div class="form-group">
            <label>wait list node</label>
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)] = "modal_step_content.pdata.waitlist_node" name="waitlist_node">
            </div>
          </div>
          <div class="form-group">
            <label>code variable (optional)</label>
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)] = "modal_step_content.pdata.code_node" name="code_node">
            </div>
          </div>

        </div>

        <div class="form-group" *ngSwitchCase="10">

          <div class="form-group">
            <label>name of the list node</label>
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)] = "modal_step_content.pdata.list_node" name="list_node">
            </div>
          </div>
          <div class="form-group">
            <label>name of the refid node</label>
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)] = "modal_step_content.pdata.refid_node" name="refid_node">
            </div>
          </div>
          <div class="form-group">
            <label>workflow id</label>
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)] = "modal_step_content.pdata.wfid" name="wfid">
            </div>
          </div>

        </div>

        <div class="form-group" *ngSwitchCase="12">

          <div class="form-group">
            <label>value node</label>
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)] = "modal_step_content.pdata.value_node" name="value_node">
            </div>
          </div>
          <div class="form-group">
            <label>name of the refid node</label>
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)] = "modal_step_content.pdata.refid_node" name="refid_node">
            </div>
          </div>
          <div class="form-group">
            <label>switch</label>
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)] = "modal_step_content.pdata.switch" name="switch">
            </div>
          </div>


        </div>

        <div class="form-group" *ngSwitchCase="13">

          <div class="form-group">
            <label>variable name</label>
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)] = "modal_step_content.pdata.value_node" name="value_node">
            </div>
          </div>
          <div class="form-group">
            <label>workflow ID if found</label>
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)] = "modal_step_content.pdata.wfid" name="wfid">
            </div>
          </div>

          <div class="form-group">
            <label>params node (optional)</label>
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)] = "modal_step_content.pdata.params_node" name="params_node">
            </div>
          </div>

        </div>

        <div class="form-group" *ngSwitchCase="50">

          <div class="form-group">
            <label>variable name</label>
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)] = "modal_step_content.pdata.var_name" name="var_name">
            </div>
          </div>
          <div class="form-group">
            <label>new variable name</label>
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)] = "modal_step_content.pdata.new_name" name="new_name">
            </div>
          </div>


        </div>

        <div class="form-group" *ngSwitchCase="51">

          <div class="form-group">
            <label>node name</label>
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)] = "modal_step_content.pdata.node_name" name="node_name">
            </div>
          </div>

        </div>

        <div class="form-group" *ngSwitchCase="52">

          <div class="form-group">
            <label>variable name</label>
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)] = "modal_step_content.pdata.var_name" name="var_name">
            </div>
          </div>
          <div class="form-group">
            <label>new variable name</label>
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)] = "modal_step_content.pdata.new_name" name="new_name">
            </div>
          </div>


        </div>

      </div>
    </div>

</div>
<div class="modal-footer">
  <button type="button" class="btn btn-outline-dark" (click)="modal.dismiss()">{{ 'MISC.CANCEL' | transloco }}</button>
  <button type="submit" class="btn btn-outline-success">{{ 'MISC.ADD' | transloco }}</button>
</div>
</form>
