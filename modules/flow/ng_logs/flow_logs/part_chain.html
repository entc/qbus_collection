<ul class="timeline">
  <li *ngFor="let log of logs">

    <div class="timeline-badge danger" *ngIf="log.state == 4">
      <i class="fas fa-times"></i>
    </div>
    <div class="timeline-badge success" *ngIf="log.state == 3">
      <i class="fas fa-check"></i>
    </div>
    <div class="timeline-badge default" *ngIf="log.state == 2">
      <i class="fas fa-pause"></i>
    </div>
    <div class="timeline-badge danger" *ngIf="log.state == 1">
      <i class="fas fa-exclamation"></i>
    </div>
    <div class="timeline-badge warn" *ngIf="log.state == 0">
      <i class="fas fa-question"></i>
    </div>

    <div class="timeline-panel">
      <div class="timeline-heading">
        <h4 class="timeline-title">{{log.name}}</h4>

        <div *ngFor="let item of log.states">

          <div *ngIf="item.state == 6">
            <span class="badge badge-success"><i class="fas fa-check-circle"></i>&nbsp;&nbsp;{{item.pot | trlo_locale}}</span>
          </div>
          <div *ngIf="item.state == 7">
            <span class="badge badge-light"><i class="fas fa-eye"></i>&nbsp;&nbsp;{{item.pot | trlo_locale}}&nbsp;&nbsp;{{item.data['remote']}}</span>
          </div>
          <div *ngIf="item.state == 1">
            <span class="badge badge-danger"><i class="fas fa-exclamation"></i>
              &nbsp;&nbsp;{{item.pot | trlo_locale}}&nbsp;&nbsp;
              <span *ngIf="item.data">
                {{item.data['err_text']}}
              </span>
            </span>
          </div>

        </div>
        <div *ngIf="log.state == 2 || log.state == 1 || log.between">

          <hr>
          <button (click)="open_process_modal (log)" class="btn btn-outline-secondary btn-sm mr-2"><i class="fas fa-info-circle"></i>&nbsp;&nbsp;{{ 'FLOW.STEPDETAILS' | transloco }}</button>
          <button (click)="rerun_step (log)" class="btn btn-outline-success btn-sm mr-2"><i class="fas fa-play-circle"></i>&nbsp;&nbsp;{{ 'FLOW.RERUNSTEP' | transloco }}</button>
          <button (click)="rerun_once (log)" class="btn btn-outline-success btn-sm mr-2"><i class="fas fa-dot-circle"></i>&nbsp;&nbsp;{{ 'FLOW.RERUNONCE' | transloco }}</button>
          <button (click)="prev_step (log)" class="btn btn-outline-secondary btn-sm mr-2"><i class="fas fa-arrow-alt-circle-up"></i>&nbsp;&nbsp;{{ 'FLOW.PREVSTEP' | transloco }}</button>

        </div>

      </div>
      <div class="mt-4" *ngIf="log.logs">
        <div class="timeline-body mt-2">

          <flow-chain [logs]="log.logs" (refresh)="refresh_apply()"></flow-chain>

        </div>
      </div>
    </div>
  </li>
</ul>
